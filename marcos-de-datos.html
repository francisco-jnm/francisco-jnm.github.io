<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>—</title>

<script src="site_libs/header-attrs-2.6/header-attrs.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="site_libs/datatables-binding-0.17/datatables.js"></script>
<link href="site_libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="site_libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="site_libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Ciencia de datos</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Instalar R
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="instalar-r.html">Instalar R</a>
    </li>
    <li>
      <a href="instalar-rtools.html">Instalar Rtools</a>
    </li>
    <li>
      <a href="recursos.html">Recursos de R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Lenguaje R
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="recursos.html">Recursos de R</a>
    </li>
    <li>
      <a href="Vectores.html">Vectores</a>
    </li>
    <li>
      <a href="estructuras-de-control.html">Estructuras de control</a>
    </li>
    <li>
      <a href="marcos-de-datos.html">Marcos de datos</a>
    </li>
    <li>
      <a href="marcos-de-datos-con-dplyr.html">Marcos de datos con dplyr</a>
    </li>
    <li>
      <a href="descargar-salvar-recuperar.html">Descargar / Salvar / Recuperar</a>
    </li>
    <li>
      <a href="valores-perdidos.html">Valores perdidos</a>
    </li>
    <li>
      <a href="directorios.html">Listar directorios</a>
    </li>
    <li>
      <a href="expresiones-regulares.html">Expresiones regulares</a>
    </li>
    <li>
      <a href="fechas.html">Fechas</a>
    </li>
    <li>
      <a href="muestras-aleatorias.html">Muestras aleatorias</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Obtener datos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="leer-hojas-excel.html">Leer hojas Excel</a>
    </li>
    <li>
      <a href="leer-ficheros-xml.html">Leer ficheros XML</a>
    </li>
    <li>
      <a href="leer-ficheros-html.html">Leer ficheros HTML</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">—</h1>

</div>


<div id="conceptos-básicos" class="section level3">
<h3>Conceptos básicos</h3>
<p>Los marcos de datos, junto con los vectores, son el elemento básico de trabajo en R. Son lo que se podría llamar, simplemente, una tabla.</p>
<p>En R se entiende que cada columna de un marco de datos representa una variable observada en el curso de un estudio estadístico y cada fila es una de las observaciones realizadas.</p>
<p>Los marcos de datos se pueden crear directamente con la función “data.frame”:</p>
<pre class="r"><code>provincias = data.frame(
    provincia = c(&quot;Albacete&quot;, &quot;Alicante&quot;, &quot;Almería&quot;),
    habitantes = c(390313, 1838973, 700712),
    superficie = c(14926,5817,8775)
)
print(provincias)</code></pre>
<pre><code>##   provincia habitantes superficie
## 1  Albacete     390313      14926
## 2  Alicante    1838973       5817
## 3   Almería     700712       8775</code></pre>
<p>A veces es útil empezar con un marco de datos vacío:</p>
<pre class="r"><code>df_vacio&lt;- data.frame() # marco de datos vacío
df_vacio</code></pre>
<pre><code>## data frame with 0 columns and 0 rows</code></pre>
<p>Si dos marcos de datos tienen las mismas columnas se pueden <strong>unir las filas</strong> con la función “rbind”:</p>
<pre class="r"><code>mas_provincias = data.frame(
    provincia = c(&quot;Vizcaya&quot;, &quot;Zamora&quot;, &quot;Zaragoza&quot;),
    habitantes = c(1134136, 177002, 962432),
    superficie = c(2217,10561,17274)
)
    
provincias = rbind(provincias, mas_provincias)
print(provincias)</code></pre>
<pre><code>##   provincia habitantes superficie
## 1  Albacete     390313      14926
## 2  Alicante    1838973       5817
## 3   Almería     700712       8775
## 4   Vizcaya    1134136       2217
## 5    Zamora     177002      10561
## 6  Zaragoza     962432      17274</code></pre>
<p>Si dos marcos de datos tienen una serie de “campos clave” comunes se pueden <strong>unir las columnas</strong> con la función “merge”:</p>
<pre class="r"><code>provincias = data.frame(
    provincia = c(&quot;Albacete&quot;, &quot;Alicante&quot;, &quot;Almería&quot;),
    habitantes = c(390313, 1838973, 700712),
    superficie = c(14926,5817,8775)
)

mas_datos = data.frame(
    provincia = c(&quot;Albacete&quot;, &quot;Alicante&quot;, &quot;Almería&quot;),
    pib = c(7763, 35062, 14340)
)

provincias = merge(provincias, mas_datos, by=c(&quot;provincia&quot;)) #by: vector de campos clave

print(provincias)</code></pre>
<pre><code>##   provincia habitantes superficie   pib
## 1  Albacete     390313      14926  7763
## 2  Alicante    1838973       5817 35062
## 3   Almería     700712       8775 14340</code></pre>
<p>Sin embargo, es muy poco probable que vayamos a crear un marco de datos tecleando directamente cada columna. En la práctica, crearemos el marco de datos cargando algún tipo de fichero. Cuando es un fichero de texto que ya reproduce una tabla separando las columnas mediante comas, tabuladores o caracteres similares, es muy sencillo leerlo y almacenarlo en un marco de datos mediante la función “read.table”:</p>
<pre class="r"><code>provincias = read.table(
  file = &quot;provincias.csv&quot;,
  header = TRUE,
  sep = &quot;;&quot;,
  dec = &quot;,&quot;,
  na.strings = &quot;NA&quot;,
  stringsAsFactors = FALSE,
  encoding = &#39;UTF-8&#39;
)</code></pre>
<p>En este caso, lo que hemos leído es un fichero que contiene datos sobre las 52 provincias de España. Estos datos son:</p>
<ul>
<li>region: nombre de la región o comunidad autónoma</li>
<li>provincia: nombre la provincia</li>
<li>habitantes: número de habitantes</li>
<li>superficie: extensión de la provincia en kilómetros cuadrados</li>
<li>pib: producto interno bruto de la provincia en millones de euros</li>
<li>pib_per_capita: producto interno bruto por habitante en miles de euros</li>
</ul>
<p>Y lo hemos cargado en un marco de datos que hemos llamado “provincias”. Podemos ver los nombres de las columnas con la función “names”, el número de columnas con la función “ncol” y el número de filas con la función “nrow”. La función “dim” nos dice de un sólo golpe el número de filas y de columnas (en ese orden):</p>
<pre class="r"><code>names(provincias)</code></pre>
<pre><code>## [1] &quot;region&quot;         &quot;provincia&quot;      &quot;habitantes&quot;     &quot;superficie&quot;    
## [5] &quot;pib&quot;            &quot;pib_per_capita&quot;</code></pre>
<pre class="r"><code>ncol(provincias)</code></pre>
<pre><code>## [1] 6</code></pre>
<pre class="r"><code>nrow(provincias)</code></pre>
<pre><code>## [1] 52</code></pre>
<pre class="r"><code>dim(provincias)</code></pre>
<pre><code>## [1] 52  6</code></pre>
<p>La función “summary” nos da los nombres de las columnas del marco de datos y, además, si son númericas, nos muestras las seis medidas básicas: mínimo, primer cuartil, mediana, media, tercer cuartil y máximo.</p>
<pre class="r"><code>summary(provincias)</code></pre>
<pre><code>##     region           provincia           habitantes        superficie     
##  Length:52          Length:52          Min.   :  84809   Min.   :   12.3  
##  Class :character   Class :character   1st Qu.: 321523   1st Qu.: 6203.8  
##  Mode  :character   Mode  :character   Median : 609958   Median : 9315.5  
##                                        Mean   : 894936   Mean   : 9726.5  
##                                        3rd Qu.:1039095   3rd Qu.:13564.8  
##                                        Max.   :6504879   Max.   :21766.0  
##       pib         pib_per_capita 
##  Min.   :  1521   Min.   :17343  
##  1st Qu.:  7407   1st Qu.:19551  
##  Median : 12830   Median :21797  
##  Mean   : 22325   Mean   :23237  
##  3rd Qu.: 22688   3rd Qu.:26649  
##  Max.   :221433   Max.   :36921</code></pre>
<p>Aunque este marco de datos tiene sólo 52 filas, uno más realista puede tener miles o millones de filas y no puede ser mostrado en su totalidad. La función “head” nos permite mostrar las primeras filas y la función “tail” las últimas:</p>
<pre class="r"><code>head(provincias) # 6 filas, por defecto</code></pre>
<pre><code>##      region provincia habitantes superficie   pib pib_per_capita
## 1 Andalucía   Almería     700712       8775 14340          20465
## 2 Andalucía     Cádiz    1240434       7440 21513          17343
## 3 Andalucía   Córdoba     787819      13771 14152          17964
## 4 Andalucía   Granada     916486      12646 16400          17894
## 5 Andalucía    Huelva     521605      10127 10007          19185
## 6 Andalucía      Jaén     638991      13496 11160          17465</code></pre>
<pre class="r"><code>head(provincias, 10) # se indica el número de filas a mostrar</code></pre>
<pre><code>##       region provincia habitantes superficie   pib pib_per_capita
## 1  Andalucía   Almería     700712       8775 14340          20465
## 2  Andalucía     Cádiz    1240434       7440 21513          17343
## 3  Andalucía   Córdoba     787819      13771 14152          17964
## 4  Andalucía   Granada     916486      12646 16400          17894
## 5  Andalucía    Huelva     521605      10127 10007          19185
## 6  Andalucía      Jaén     638991      13496 11160          17465
## 7  Andalucía    Málaga    1645367       7306 29676          18036
## 8  Andalucía   Sevilla    1943302      14036 38215          19665
## 9     Aragón    Huesca     219169      15636  6336          28910
## 10    Aragón    Teruel     134113      14809  3343          24928</code></pre>
<pre class="r"><code>tail(provincias) # 6 filas, por defecto</code></pre>
<pre><code>##              region provincia habitantes superficie   pib pib_per_capita
## 47          Melilla   Melilla      84809       12.3  1521          17934
## 48          Navarra   Navarra     640965    10391.0 19555          30508
## 49       País Vasco     Álava     324568     3037.0 11983          36921
## 50       País Vasco Guipúzcoa     708872     1997.0 22695          32015
## 51       País Vasco   Vizcaya    1134136     2217.0 35046          30901
## 52 Región de Murcia    Murcia    1473618    11313.0 30601          20766</code></pre>
<pre class="r"><code>tail(provincias, 3) # se indica el número de filas a mostrar</code></pre>
<pre><code>##              region provincia habitantes superficie   pib pib_per_capita
## 50       País Vasco Guipúzcoa     708872       1997 22695          32015
## 51       País Vasco   Vizcaya    1134136       2217 35046          30901
## 52 Región de Murcia    Murcia    1473618      11313 30601          20766</code></pre>
<p>Podemos referirnos a una columna concreta mediante el símbolo “$”. Esto permite manejar la columna como un vector:</p>
<pre class="r"><code>provincias$provincia[10:14]</code></pre>
<pre><code>## [1] &quot;Teruel&quot;    &quot;Zaragoza&quot;  &quot;Asturias&quot;  &quot;Cantabria&quot; &quot;Albacete&quot;</code></pre>
<pre class="r"><code>provincias$pib[13]</code></pre>
<pre><code>## [1] 13226</code></pre>
<p>La misma notación de paréntesis utilizada en los vectores, pero con dos coordenadas, permite seleccionar una [fila, columna] concreta.</p>
<pre class="r"><code>provincias[13,1] #fila 13, columna 1</code></pre>
<pre><code>## [1] &quot;Cantabria&quot;</code></pre>
</div>
<div id="manejo-de-un-marco-de-datos" class="section level3">
<h3>Manejo de un marco de datos</h3>
<div id="seleccionar-columnas" class="section level4">
<h4>Seleccionar columnas</h4>
<p>Para seleccionar una columna mediante su número (R numera empezando en el 1) sólo hay que utilizar un corchete, como si el marco de datos fuera un vector, y especificar dentro el número de columna <strong>precedido</strong> de una coma.</p>
<pre class="r"><code>head( provincias[,2]  )</code></pre>
<pre><code>## [1] &quot;Almería&quot; &quot;Cádiz&quot;   &quot;Córdoba&quot; &quot;Granada&quot; &quot;Huelva&quot;  &quot;Jaén&quot;</code></pre>
<p>Para especificar un rango de columnas o columnas concretas podemos utilizar el operador “:” o la función “c”:</p>
<pre class="r"><code>head( provincias[,1:4] ) # columnas desde la 1ª hasta la 4ª</code></pre>
<pre><code>##      region provincia habitantes superficie
## 1 Andalucía   Almería     700712       8775
## 2 Andalucía     Cádiz    1240434       7440
## 3 Andalucía   Córdoba     787819      13771
## 4 Andalucía   Granada     916486      12646
## 5 Andalucía    Huelva     521605      10127
## 6 Andalucía      Jaén     638991      13496</code></pre>
<pre class="r"><code>head( provincias[,c(1,5,6)] ) # columnas concretas</code></pre>
<pre><code>##      region   pib pib_per_capita
## 1 Andalucía 14340          20465
## 2 Andalucía 21513          17343
## 3 Andalucía 14152          17964
## 4 Andalucía 16400          17894
## 5 Andalucía 10007          19185
## 6 Andalucía 11160          17465</code></pre>
<p>También podemos utilizar los nombres de las columnas en lugar del número:</p>
<pre class="r"><code>head( provincias[,c(&quot;provincia&quot;, &quot;habitantes&quot;, &quot;pib_per_capita&quot;)] )</code></pre>
<pre><code>##   provincia habitantes pib_per_capita
## 1   Almería     700712          20465
## 2     Cádiz    1240434          17343
## 3   Córdoba     787819          17964
## 4   Granada     916486          17894
## 5    Huelva     521605          19185
## 6      Jaén     638991          17465</code></pre>
</div>
<div id="seleccionar-filas" class="section level4">
<h4>Seleccionar filas</h4>
<p>Para seleccionar una fila mediante su número (R numera empezando en el 1) sólo hay que utilizar un corchete, como si el marco de datos fuera un vector, y especificar dentro el número de fila <strong>seguido</strong> de una coma:</p>
<pre class="r"><code>provincias[1:4,] # filas desde la 1ª hasta la 4ª</code></pre>
<pre><code>##      region provincia habitantes superficie   pib pib_per_capita
## 1 Andalucía   Almería     700712       8775 14340          20465
## 2 Andalucía     Cádiz    1240434       7440 21513          17343
## 3 Andalucía   Córdoba     787819      13771 14152          17964
## 4 Andalucía   Granada     916486      12646 16400          17894</code></pre>
<pre class="r"><code>provincias[c(1,5,6),] # filas concretas</code></pre>
<pre><code>##      region provincia habitantes superficie   pib pib_per_capita
## 1 Andalucía   Almería     700712       8775 14340          20465
## 5 Andalucía    Huelva     521605      10127 10007          19185
## 6 Andalucía      Jaén     638991      13496 11160          17465</code></pre>
<p>También se pueden construir filtros con los nombres de campos y los operadores “clásicos”: &amp; (and), | (or), == (igual a), %in% (lista), &lt;, &lt;=, etc…</p>
<pre class="r"><code>provincias[provincias$region == &quot;Andalucía&quot; &amp; provincias$pib &gt;= 15000,]</code></pre>
<pre><code>##      region provincia habitantes superficie   pib pib_per_capita
## 2 Andalucía     Cádiz    1240434       7440 21513          17343
## 4 Andalucía   Granada     916486      12646 16400          17894
## 7 Andalucía    Málaga    1645367       7306 29676          18036
## 8 Andalucía   Sevilla    1943302      14036 38215          19665</code></pre>
<p>Podemos combinar con la selección de columnas:</p>
<pre class="r"><code>provincias[provincias$region == &quot;Andalucía&quot; &amp; provincias$pib &gt;= 15000, c(&quot;provincia&quot;, &quot;pib&quot;)]</code></pre>
<pre><code>##   provincia   pib
## 2     Cádiz 21513
## 4   Granada 16400
## 7    Málaga 29676
## 8   Sevilla 38215</code></pre>
</div>
<div id="ordenar-las-filas" class="section level4">
<h4>Ordenar las filas</h4>
<p>Para ordenar las filas se utiliza la función “order” como si fuera una selección de filas:</p>
<pre class="r"><code>head(provincias[order(provincias$pib),])</code></pre>
<pre><code>##             region provincia habitantes superficie  pib pib_per_capita
## 47         Melilla   Melilla      84809       12.3 1521          17934
## 32           Ceuta     Ceuta      84995       18.5 1661          19537
## 25 Castilla y León     Soria      93797    10306.0 2293          24445
## 19 Castilla y León     Ávila     160519     8050.0 3139          19555
## 10          Aragón    Teruel     134113    14809.0 3343          24928
## 24 Castilla y León   Segovia     154467     6920.0 3464          22428</code></pre>
<pre class="r"><code>head(provincias[order(provincias$region, provincias$pib),]) # ordenado por dos columnas</code></pre>
<pre><code>##      region provincia habitantes superficie   pib pib_per_capita
## 5 Andalucía    Huelva     521605      10127 10007          19185
## 6 Andalucía      Jaén     638991      13496 11160          17465
## 3 Andalucía   Córdoba     787819      13771 14152          17964
## 1 Andalucía   Almería     700712       8775 14340          20465
## 4 Andalucía   Granada     916486      12646 16400          17894
## 2 Andalucía     Cádiz    1240434       7440 21513          17343</code></pre>
<pre class="r"><code>head(provincias[order(provincias$region, -provincias$pib),]) # con el &quot;-&quot; el orden es descendente</code></pre>
<pre><code>##      region provincia habitantes superficie   pib pib_per_capita
## 8 Andalucía   Sevilla    1943302      14036 38215          19665
## 7 Andalucía    Málaga    1645367       7306 29676          18036
## 2 Andalucía     Cádiz    1240434       7440 21513          17343
## 4 Andalucía   Granada     916486      12646 16400          17894
## 1 Andalucía   Almería     700712       8775 14340          20465
## 3 Andalucía   Córdoba     787819      13771 14152          17964</code></pre>
</div>
<div id="construir-nuevas-columnas" class="section level4">
<h4>Construir nuevas columnas</h4>
<p>Para construir una nueva columna basta utilizar el operador “$” para indicar el nombre deseado y especificar el cálculo:</p>
<pre class="r"><code>provincias$habitantes_por_km2 = round(provincias$habitantes / provincias$superficie,0)
provincias[1:10,c(&quot;provincia&quot;, &quot;habitantes&quot;, &quot;superficie&quot;, &quot;habitantes_por_km2&quot;)]</code></pre>
<pre><code>##    provincia habitantes superficie habitantes_por_km2
## 1    Almería     700712       8775                 80
## 2      Cádiz    1240434       7440                167
## 3    Córdoba     787819      13771                 57
## 4    Granada     916486      12646                 72
## 5     Huelva     521605      10127                 52
## 6       Jaén     638991      13496                 47
## 7     Málaga    1645367       7306                225
## 8    Sevilla    1943302      14036                138
## 9     Huesca     219169      15636                 14
## 10    Teruel     134113      14809                  9</code></pre>
<p>Una técnica muy útil es construir una columna asignando etiquetas a intervalos de otra. Esto se puede hacer con la función “cut”:</p>
<pre class="r"><code>provincias$productividad = cut(provincias$pib_per_capita, 
                                    breaks=3, 
                                    c(&quot;mejorable&quot;, &quot;bueno&quot;, &quot;muy bueno&quot;)
                                    )


provincias[41:50,c(&quot;provincia&quot;, &quot;pib_per_capita&quot;, &quot;productividad&quot;)]</code></pre>
<pre><code>##                 provincia pib_per_capita productividad
## 41             Pontevedra          21612     mejorable
## 42         Islas Baleares          27134         bueno
## 43             Las Palmas          20614     mejorable
## 44 Santa Cruz de Tenerife          20221     mejorable
## 45                Logroño          26528         bueno
## 46                 Madrid          34041     muy bueno
## 47                Melilla          17934     mejorable
## 48                Navarra          30508     muy bueno
## 49                  Álava          36921     muy bueno
## 50              Guipúzcoa          32015     muy bueno</code></pre>
</div>
</div>
<div id="agrupar-y-totalizar" class="section level3">
<h3>Agrupar y totalizar</h3>
<p>Para agrupar y totalizar se utiliza la función “aggregate” y la llamada “notación de fórmula” que consiste en utilizar el símbolo “~” (tilde). Después, se indican el marco de datos y la función totalizadora.</p>
<p>Para totalizar un campo agrupado por otro, se escriben en ese orden separados por la tilde:</p>
<pre class="r"><code>#media de pib por región
aggregate(pib~region, data=provincias, mean)</code></pre>
<pre><code>##                  region        pib
## 1             Andalucía  19432.875
## 2                Aragón  11891.667
## 3              Asturias  22640.000
## 4             Cantabria  13226.000
## 5    Castilla-La Mancha   7983.000
## 6       Castilla y León   6249.667
## 7              Cataluña  55359.250
## 8                 Ceuta   1661.000
## 9  Comunidad Valenciana  35920.667
## 10          Extremadura   9749.500
## 11              Galicia  15146.750
## 12       Islas Baleares  31420.000
## 13       Islas Canarias  22125.500
## 14             La Rioja   8287.000
## 15               Madrid 221433.000
## 16              Melilla   1521.000
## 17              Navarra  19555.000
## 18           País Vasco  23241.333
## 19     Región de Murcia  30601.000</code></pre>
<p>Para añadir campos de agrupación se utiliza el signo “+”:</p>
<pre class="r"><code>#media de pib por región y productividad
aggregate(pib~region + productividad, data=provincias, mean)</code></pre>
<pre><code>##                  region productividad       pib
## 1             Andalucía     mejorable  19432.88
## 2              Asturias     mejorable  22640.00
## 3             Cantabria     mejorable  13226.00
## 4    Castilla-La Mancha     mejorable   7983.00
## 5       Castilla y León     mejorable   5313.00
## 6                 Ceuta     mejorable   1661.00
## 7  Comunidad Valenciana     mejorable  46390.50
## 8           Extremadura     mejorable   9749.50
## 9               Galicia     mejorable  15146.75
## 10       Islas Canarias     mejorable  22125.50
## 11              Melilla     mejorable   1521.00
## 12     Región de Murcia     mejorable  30601.00
## 13               Aragón         bueno  11891.67
## 14      Castilla y León         bueno   7420.50
## 15             Cataluña         bueno  55359.25
## 16 Comunidad Valenciana         bueno  14981.00
## 17       Islas Baleares         bueno  31420.00
## 18             La Rioja         bueno   8287.00
## 19               Madrid     muy bueno 221433.00
## 20              Navarra     muy bueno  19555.00
## 21           País Vasco     muy bueno  23241.33</code></pre>
<p>Para añadir campos de totalización se utiliza la función “cbind”:</p>
<pre class="r"><code>#media de pib y habitantes por región
aggregate(cbind(pib,habitantes)~region, data=provincias, mean)</code></pre>
<pre><code>##                  region        pib habitantes
## 1             Andalucía  19432.875  1049339.5
## 2                Aragón  11891.667   438571.3
## 3              Asturias  22640.000  1029973.0
## 4             Cantabria  13226.000   580924.0
## 5    Castilla-La Mancha   7983.000   406616.2
## 6       Castilla y León   6249.667   269713.1
## 7              Cataluña  55359.250  1863529.8
## 8                 Ceuta   1661.000    84995.0
## 9  Comunidad Valenciana  35920.667  1643321.7
## 10          Extremadura   9749.500   536575.5
## 11              Galicia  15146.750   675863.0
## 12       Islas Baleares  31420.000  1157958.0
## 13       Islas Canarias  22125.500  1083490.0
## 14             La Rioja   8287.000   312388.0
## 15               Madrid 221433.000  6504879.0
## 16              Melilla   1521.000    84809.0
## 17              Navarra  19555.000   640965.0
## 18           País Vasco  23241.333   722525.3
## 19     Región de Murcia  30601.000  1473618.0</code></pre>
<p>Algunas de las funciones totalizadores más frecuentes son:</p>
<pre class="r"><code># media
aggregate(pib~region, data=provincias, mean)</code></pre>
<pre><code>##                  region        pib
## 1             Andalucía  19432.875
## 2                Aragón  11891.667
## 3              Asturias  22640.000
## 4             Cantabria  13226.000
## 5    Castilla-La Mancha   7983.000
## 6       Castilla y León   6249.667
## 7              Cataluña  55359.250
## 8                 Ceuta   1661.000
## 9  Comunidad Valenciana  35920.667
## 10          Extremadura   9749.500
## 11              Galicia  15146.750
## 12       Islas Baleares  31420.000
## 13       Islas Canarias  22125.500
## 14             La Rioja   8287.000
## 15               Madrid 221433.000
## 16              Melilla   1521.000
## 17              Navarra  19555.000
## 18           País Vasco  23241.333
## 19     Región de Murcia  30601.000</code></pre>
<pre class="r"><code># mediana
aggregate(pib~region, data=provincias, median)</code></pre>
<pre><code>##                  region      pib
## 1             Andalucía  15370.0
## 2                Aragón   6336.0
## 3              Asturias  22640.0
## 4             Cantabria  13226.0
## 5    Castilla-La Mancha   7763.0
## 6       Castilla y León   4137.0
## 7              Cataluña  22586.0
## 8                 Ceuta   1661.0
## 9  Comunidad Valenciana  35062.0
## 10          Extremadura   9749.5
## 11              Galicia  14000.5
## 12       Islas Baleares  31420.0
## 13       Islas Canarias  22125.5
## 14             La Rioja   8287.0
## 15               Madrid 221433.0
## 16              Melilla   1521.0
## 17              Navarra  19555.0
## 18           País Vasco  22695.0
## 19     Región de Murcia  30601.0</code></pre>
<pre class="r"><code># mínimo
aggregate(pib~region, data=provincias, min)</code></pre>
<pre><code>##                  region    pib
## 1             Andalucía  10007
## 2                Aragón   3343
## 3              Asturias  22640
## 4             Cantabria  13226
## 5    Castilla-La Mancha   4553
## 6       Castilla y León   2293
## 7              Cataluña  12435
## 8                 Ceuta   1661
## 9  Comunidad Valenciana  14981
## 10          Extremadura   7574
## 11              Galicia   6441
## 12       Islas Baleares  31420
## 13       Islas Canarias  21565
## 14             La Rioja   8287
## 15               Madrid 221433
## 16              Melilla   1521
## 17              Navarra  19555
## 18           País Vasco  11983
## 19     Región de Murcia  30601</code></pre>
<pre class="r"><code># máximo
aggregate(pib~region, data=provincias, max)</code></pre>
<pre><code>##                  region    pib
## 1             Andalucía  38215
## 2                Aragón  25996
## 3              Asturias  22640
## 4             Cantabria  13226
## 5    Castilla-La Mancha  12361
## 6       Castilla y León  13279
## 7              Cataluña 163830
## 8                 Ceuta   1661
## 9  Comunidad Valenciana  57719
## 10          Extremadura  11925
## 11              Galicia  26145
## 12       Islas Baleares  31420
## 13       Islas Canarias  22686
## 14             La Rioja   8287
## 15               Madrid 221433
## 16              Melilla   1521
## 17              Navarra  19555
## 18           País Vasco  35046
## 19     Región de Murcia  30601</code></pre>
<p>También se puede utilizar la totalización/agrupación para hacer un recuento, aunque para esto existe la función estándar “table”:</p>
<pre class="r"><code># recuento
aggregate(provincia~region+productividad, data=provincias, length)</code></pre>
<pre><code>##                  region productividad provincia
## 1             Andalucía     mejorable         8
## 2              Asturias     mejorable         1
## 3             Cantabria     mejorable         1
## 4    Castilla-La Mancha     mejorable         5
## 5       Castilla y León     mejorable         5
## 6                 Ceuta     mejorable         1
## 7  Comunidad Valenciana     mejorable         2
## 8           Extremadura     mejorable         2
## 9               Galicia     mejorable         4
## 10       Islas Canarias     mejorable         2
## 11              Melilla     mejorable         1
## 12     Región de Murcia     mejorable         1
## 13               Aragón         bueno         3
## 14      Castilla y León         bueno         4
## 15             Cataluña         bueno         4
## 16 Comunidad Valenciana         bueno         1
## 17       Islas Baleares         bueno         1
## 18             La Rioja         bueno         1
## 19               Madrid     muy bueno         1
## 20              Navarra     muy bueno         1
## 21           País Vasco     muy bueno         3</code></pre>
<pre class="r"><code>table(provincias$productividad, provincias$region) ## Función &quot;table&quot;</code></pre>
<pre><code>##            
##             Andalucía Aragón Asturias Cantabria Castilla-La Mancha
##   mejorable         8      0        1         1                  5
##   bueno             0      3        0         0                  0
##   muy bueno         0      0        0         0                  0
##            
##             Castilla y León Cataluña Ceuta Comunidad Valenciana Extremadura
##   mejorable               5        0     1                    2           2
##   bueno                   4        4     0                    1           0
##   muy bueno               0        0     0                    0           0
##            
##             Galicia Islas Baleares Islas Canarias La Rioja Madrid Melilla
##   mejorable       4              0              2        0      0       1
##   bueno           0              1              0        1      0       0
##   muy bueno       0              0              0        0      1       0
##            
##             Navarra País Vasco Región de Murcia
##   mejorable       0          0                1
##   bueno           0          0                0
##   muy bueno       1          3                0</code></pre>
</div>
<div id="la-mejor-forma-de-mostrar-un-marco-de-datos-dtdatable" class="section level3">
<h3>La mejor forma de mostrar un marco de datos (DT::datable)</h3>
<p>La función “datatable” del paquete “DT” es la mejor forma de visualizar el contenido de un marco de datos. Se puede considerar una única función (DT::datable).</p>
<p>Directamente, tenemos una excelente visualización y la posibilidad de ordenar y buscar.</p>
<pre class="r"><code>DT::datatable(provincias)</code></pre>
<div id="htmlwidget-94578af85d310eff7124" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-94578af85d310eff7124">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52"],["Andalucía","Andalucía","Andalucía","Andalucía","Andalucía","Andalucía","Andalucía","Andalucía","Aragón","Aragón","Aragón","Asturias","Cantabria","Castilla-La Mancha","Castilla-La Mancha","Castilla-La Mancha","Castilla-La Mancha","Castilla-La Mancha","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Cataluña","Cataluña","Cataluña","Cataluña","Ceuta","Comunidad Valenciana","Comunidad Valenciana","Comunidad Valenciana","Extremadura","Extremadura","Galicia","Galicia","Galicia","Galicia","Islas Baleares","Islas Canarias","Islas Canarias","La Rioja","Madrid","Melilla","Navarra","País Vasco","País Vasco","País Vasco","Región de Murcia"],["Almería","Cádiz","Córdoba","Granada","Huelva","Jaén","Málaga","Sevilla","Huesca","Teruel","Zaragoza","Asturias","Cantabria","Albacete","Ciudad Real","Cuenca","Guadalajara","Toledo","Ávila","Burgos","León","Palencia","Salamanca","Segovia","Soria","Valladolid","Zamora","Barcelona","Gerona","Lérida","Tarragona","Ceuta","Alicante","Castellón","Valencia","Badajoz","Cáceres","La Coruña","Lugo","Orense","Pontevedra","Islas Baleares","Las Palmas","Santa Cruz de Tenerife","Logroño","Madrid","Melilla","Navarra","Álava","Guipúzcoa","Vizcaya","Murcia"],[700712,1240434,787819,916486,521605,638991,1645367,1943302,219169,134113,962432,1029973,580924,390313,500280,201091,255532,685865,160519,356243,467716,162201,334343,154467,93797,521130,177002,5482010,747349,432394,792366,84995,1838973,568512,2522480,676141,397010,1120015,332401,309952,941084,1157958,1100518,1066462,312388,6504879,84809,640965,324568,708872,1134136,1473618],[8775,7440,13771,12646,10127,13496,7306,14036,15636,14809,17274,10603,5321,14926,19813,17140,12214,15369,8050,14022,15580,8052,12349,6920,10306,8110,10561,7733,5909,12172,6302,18.5,5817,6636,10807,21766,19868,7950,9856,7273,4494,4991,4114,3381,5045,8027,12.3,10391,3037,1997,2217,11313],[14340,21513,14152,16400,10007,11160,29676,38215,6336,3343,25996,22640,13226,7763,10391,4553,4847,12361,3139,9973,9576,4137,6906,3464,2293,13279,3480,163830,21430,12435,23742,1661,35062,14981,57719,11925,7574,26145,7662,6441,20339,31420,22686,21565,8287,221433,1521,19555,11983,22695,35046,30601],[20465,17343,17964,17894,19185,17465,18036,19665,28910,24928,27011,21981,22767,19888,20771,22639,18968,18022,19555,27994,20473,25508,20654,22428,24445,25482,19662,29885,28674,28759,29964,19537,19066,26351,22882,17637,19077,23343,23049,20781,21612,27134,20614,20221,26528,34041,17934,30508,36921,32015,30901,20766],[80,167,57,72,52,47,225,138,14,9,56,97,109,26,25,12,21,45,20,25,30,20,27,22,9,64,17,709,126,36,126,4594,316,86,233,31,20,141,34,43,209,232,268,315,62,810,6895,62,107,355,512,130],["mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","bueno","bueno","bueno","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","bueno","mejorable","bueno","mejorable","mejorable","bueno","bueno","mejorable","bueno","bueno","bueno","bueno","mejorable","mejorable","bueno","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","bueno","mejorable","mejorable","bueno","muy bueno","mejorable","muy bueno","muy bueno","muy bueno","muy bueno","mejorable"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>region<\/th>\n      <th>provincia<\/th>\n      <th>habitantes<\/th>\n      <th>superficie<\/th>\n      <th>pib<\/th>\n      <th>pib_per_capita<\/th>\n      <th>habitantes_por_km2<\/th>\n      <th>productividad<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Por defecto, DT::datable muestra las filas de 10 en 10 pero esto también es configurable.</p>
<pre class="r"><code>DT::datatable(provincias, options = list(pageLength = 5))</code></pre>
<div id="htmlwidget-6c4130853a6bf4da2333" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6c4130853a6bf4da2333">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52"],["Andalucía","Andalucía","Andalucía","Andalucía","Andalucía","Andalucía","Andalucía","Andalucía","Aragón","Aragón","Aragón","Asturias","Cantabria","Castilla-La Mancha","Castilla-La Mancha","Castilla-La Mancha","Castilla-La Mancha","Castilla-La Mancha","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Castilla y León","Cataluña","Cataluña","Cataluña","Cataluña","Ceuta","Comunidad Valenciana","Comunidad Valenciana","Comunidad Valenciana","Extremadura","Extremadura","Galicia","Galicia","Galicia","Galicia","Islas Baleares","Islas Canarias","Islas Canarias","La Rioja","Madrid","Melilla","Navarra","País Vasco","País Vasco","País Vasco","Región de Murcia"],["Almería","Cádiz","Córdoba","Granada","Huelva","Jaén","Málaga","Sevilla","Huesca","Teruel","Zaragoza","Asturias","Cantabria","Albacete","Ciudad Real","Cuenca","Guadalajara","Toledo","Ávila","Burgos","León","Palencia","Salamanca","Segovia","Soria","Valladolid","Zamora","Barcelona","Gerona","Lérida","Tarragona","Ceuta","Alicante","Castellón","Valencia","Badajoz","Cáceres","La Coruña","Lugo","Orense","Pontevedra","Islas Baleares","Las Palmas","Santa Cruz de Tenerife","Logroño","Madrid","Melilla","Navarra","Álava","Guipúzcoa","Vizcaya","Murcia"],[700712,1240434,787819,916486,521605,638991,1645367,1943302,219169,134113,962432,1029973,580924,390313,500280,201091,255532,685865,160519,356243,467716,162201,334343,154467,93797,521130,177002,5482010,747349,432394,792366,84995,1838973,568512,2522480,676141,397010,1120015,332401,309952,941084,1157958,1100518,1066462,312388,6504879,84809,640965,324568,708872,1134136,1473618],[8775,7440,13771,12646,10127,13496,7306,14036,15636,14809,17274,10603,5321,14926,19813,17140,12214,15369,8050,14022,15580,8052,12349,6920,10306,8110,10561,7733,5909,12172,6302,18.5,5817,6636,10807,21766,19868,7950,9856,7273,4494,4991,4114,3381,5045,8027,12.3,10391,3037,1997,2217,11313],[14340,21513,14152,16400,10007,11160,29676,38215,6336,3343,25996,22640,13226,7763,10391,4553,4847,12361,3139,9973,9576,4137,6906,3464,2293,13279,3480,163830,21430,12435,23742,1661,35062,14981,57719,11925,7574,26145,7662,6441,20339,31420,22686,21565,8287,221433,1521,19555,11983,22695,35046,30601],[20465,17343,17964,17894,19185,17465,18036,19665,28910,24928,27011,21981,22767,19888,20771,22639,18968,18022,19555,27994,20473,25508,20654,22428,24445,25482,19662,29885,28674,28759,29964,19537,19066,26351,22882,17637,19077,23343,23049,20781,21612,27134,20614,20221,26528,34041,17934,30508,36921,32015,30901,20766],[80,167,57,72,52,47,225,138,14,9,56,97,109,26,25,12,21,45,20,25,30,20,27,22,9,64,17,709,126,36,126,4594,316,86,233,31,20,141,34,43,209,232,268,315,62,810,6895,62,107,355,512,130],["mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","bueno","bueno","bueno","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","bueno","mejorable","bueno","mejorable","mejorable","bueno","bueno","mejorable","bueno","bueno","bueno","bueno","mejorable","mejorable","bueno","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","mejorable","bueno","mejorable","mejorable","bueno","muy bueno","mejorable","muy bueno","muy bueno","muy bueno","muy bueno","mejorable"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>region<\/th>\n      <th>provincia<\/th>\n      <th>habitantes<\/th>\n      <th>superficie<\/th>\n      <th>pib<\/th>\n      <th>pib_per_capita<\/th>\n      <th>habitantes_por_km2<\/th>\n      <th>productividad<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
