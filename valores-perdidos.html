<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>—</title>

<script src="site_libs/header-attrs-2.6/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Ciencia de datos</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Instalar R
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="instalar-r.html">Instalar R</a>
    </li>
    <li>
      <a href="instalar-rtools.html">Instalar Rtools</a>
    </li>
    <li>
      <a href="recursos.html">Recursos de R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Lenguaje R
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="recursos.html">Recursos de R</a>
    </li>
    <li>
      <a href="Vectores.html">Vectores</a>
    </li>
    <li>
      <a href="estructuras-de-control.html">Estructuras de control</a>
    </li>
    <li>
      <a href="marcos-de-datos.html">Marcos de datos</a>
    </li>
    <li>
      <a href="marcos-de-datos-con-dplyr.html">Marcos de datos con dplyr</a>
    </li>
    <li>
      <a href="descargar-salvar-recuperar.html">Descargar / Salvar / Recuperar</a>
    </li>
    <li>
      <a href="valores-perdidos.html">Valores perdidos</a>
    </li>
    <li>
      <a href="directorios.html">Listar directorios</a>
    </li>
    <li>
      <a href="expresiones-regulares.html">Expresiones regulares</a>
    </li>
    <li>
      <a href="fechas.html">Fechas</a>
    </li>
    <li>
      <a href="muestras-aleatorias.html">Muestras aleatorias</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Obtener datos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="leer-hojas-excel.html">Leer hojas Excel</a>
    </li>
    <li>
      <a href="leer-ficheros-xml.html">Leer ficheros XML</a>
    </li>
    <li>
      <a href="leer-ficheros-html.html">Leer ficheros HTML</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">—</h1>

</div>


<p>Los marcos de datos que se construyen en el curso de un estudio es muy probable que tengan valores perdidos, bien por pérdida del dato durante el proceso de creación del marco de datos, bien porque realmente ese dato nunca se llegó a recopilar.</p>
<p>Los valores perdidos se reconocen en un marco de datos de R porque tienen el valor “NA” que significa (Not A value).</p>
<p>Cuando cargamos un marco de datos a partir de un fichero csv, indicamos mediante el parámetro “na.strings” los caracteres que identifican las celdas con valores perdidos y R las carga con valor “NA”.</p>
<p>En este ejemplo, le decimos a R que en el csv los valores perdidos son las celdas que cuyo contenido es una pareja de espacios en blanco:</p>
<pre class="r"><code>baloncesto &lt;- read.table(file = &quot;valores-perdidos.csv&quot;, 
                            header = TRUE, 
                            sep = &quot;;&quot;, 
                            dec = &quot;.&quot;,  
                            na.strings = &quot;  &quot;,
                            stringsAsFactors = FALSE)
head(baloncesto)</code></pre>
<pre><code>##               jugador equipo partidos minutos puntos rebotes asistencias
## 1       AARON JACKSON    CSK       29     619    209      43         103
## 2 ANDREY VORONTSEVICH    CSK       30     583    234      76          30
## 3        CORY HIGGINS    CSK       27     542    246      55          42
## 4      DMITRY KULAGIN    CSK       17     176     67      26          20
## 5     JAMES AUGUSTINE    CSK       29     478    169     130          12
## 6          JEFF AYRES    CSK        4      NA     24      19           0</code></pre>
<pre class="r"><code>library(dplyr)</code></pre>
<p>La función “complete.cases” permite filtrar las filas en las que no hay valores perdidos. Por negación, también permite filtrar las filas en las que alguna columna tiene un valor perdido:</p>
<pre class="r"><code>baloncesto %&gt;% filter(!complete.cases(.))</code></pre>
<pre><code>##                 jugador equipo partidos minutos puntos rebotes asistencias
## 1            JEFF AYRES    CSK        4      NA     24      19           0
## 2         JOEL FREELAND    CSK       14      NA     22      16           1
## 3       MIKHAIL KULAGIN    CSK        6      NA     22       2           0
## 4      AHMET DUVERIOGLU    FNB        7      56     NA      12           1
## 5       ANTHONY BENNETT    FNB        8      61     NA       9           1
## 6          BARIS HERSEK    FNB        3      12      4      NA           0
## 7           BERK UGURLU    FNB        7      30      2      NA          NA
## 8           EGEHAN ARNA    FNB        1      NA      0       0           0
## 9        YORDAN MINCHEV    FNB        2      NA      0       2           0
## 10    IOANNIS ATHINAIOU    OLY        9      42      3       3          NA
## 11 VASSILIS TOLIOPOULOS    OLY        2      NA      0       0           0
## 12       ANDRES NOCIONI    RMB       14      87     32       9          NA</code></pre>
<p>También podemos filtrar las filas que tienen valores perdidos en alguna columna concreta:</p>
<pre class="r"><code>baloncesto %&gt;%  filter(!complete.cases(puntos))</code></pre>
<pre><code>##            jugador equipo partidos minutos puntos rebotes asistencias
## 1 AHMET DUVERIOGLU    FNB        7      56     NA      12           1
## 2  ANTHONY BENNETT    FNB        8      61     NA       9           1</code></pre>
<p>Uno de los principales problemas que dan los valores perdidos es cuando vamos a realizar una agrupación/totalización: si existe algún valor pedido en una columna entonces la totalización de la columna es siempre “valor perdido”.</p>
<pre class="r"><code>baloncesto %&gt;% 
    group_by(equipo) %&gt;%
    summarize(total_puntos = sum(puntos))</code></pre>
<pre><code>## # A tibble: 4 x 2
##   equipo total_puntos
## * &lt;chr&gt;         &lt;int&gt;
## 1 CSK            2619
## 2 FNB              NA
## 3 OLY            2338
## 4 RMB            2585</code></pre>
<p>Hay dos formas de evitar esto. La primera es filtrar para eliminar las filas con valores perdidos en las columnas por que vamos a totalizar:</p>
<pre class="r"><code>baloncesto %&gt;% 
    filter(complete.cases(puntos)) %&gt;%
    group_by(equipo) %&gt;%
    summarize(total_puntos = sum(puntos))</code></pre>
<pre><code>## # A tibble: 4 x 2
##   equipo total_puntos
## * &lt;chr&gt;         &lt;int&gt;
## 1 CSK            2619
## 2 FNB            2246
## 3 OLY            2338
## 4 RMB            2585</code></pre>
<p>La segunda forma es utilizar el parámeto “na.rm” que suelen tener todas las funciones de totalización y que indica que se ignoren los valores perdidos y se totalice sobre los restantes:</p>
<pre class="r"><code>baloncesto %&gt;% 
    group_by(equipo) %&gt;%
    summarize(total_puntos = sum(puntos, na.rm=TRUE))</code></pre>
<pre><code>## # A tibble: 4 x 2
##   equipo total_puntos
## * &lt;chr&gt;         &lt;int&gt;
## 1 CSK            2619
## 2 FNB            2246
## 3 OLY            2338
## 4 RMB            2585</code></pre>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
