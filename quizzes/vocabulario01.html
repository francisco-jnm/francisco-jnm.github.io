<!DOCTYPE html>
<html>
<head>
    <title>Quiz</title>
    <script>
        let questionAnswerPairs = [];
        let currentIndex = 0;

        // Function to fetch the .txt file and split questions/answers
        function loadTxtFile() {
            fetch('vocabulario01.txt')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('TXT file not found');
                    }
                    return response.text();
                })
                .then(data => {
                    const lines = data.split('\n').filter(line => line.trim() !== ''); // Filter out empty lines
                    // Store question-answer pairs: odd lines = questions, even lines = answers
                    for (let i = 0; i < lines.length; i += 2) {
                        const question = lines[i].trim();
                        const answer = lines[i + 1] ? lines[i + 1].trim() : '';
                        questionAnswerPairs.push({ question, answer });
                    }
                    shuffleQuestions(); // Shuffle questions
                    showNextQuestion(); // Show the first question
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('question').innerText = 'Error loading the quiz file!';
                });
        }

        // Function to shuffle the questions array
        function shuffleQuestions() {
            for (let i = questionAnswerPairs.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [questionAnswerPairs[i], questionAnswerPairs[j]] = [questionAnswerPairs[j], questionAnswerPairs[i]];
            }
            // Set a random starting index
            currentIndex = Math.floor(Math.random() * questionAnswerPairs.length);
        }

        // Function to show the next question
        function showNextQuestion() {
            if (currentIndex < questionAnswerPairs.length) {
                const { question } = questionAnswerPairs[currentIndex];
                document.getElementById('question').innerText = question;
                document.getElementById('answer').innerText = ''; // Clear answer when showing the next question
            } else {
                document.getElementById('question').innerText = 'No more questions!';
                document.getElementById('answer').innerText = ''; // Clear answer when no more questions
            }
        }

        // Function to show the answer
        function showAnswer() {
            if (currentIndex < questionAnswerPairs.length) {
                const { answer } = questionAnswerPairs[currentIndex];
                document.getElementById('answer').innerText = answer; // Show the answer
            } else {
                document.getElementById('answer').innerText = 'No more answers!';
            }
        }

        // Function to go to the next question
        function nextQuestion() {
            currentIndex++; // Move to the next question-answer pair
            showNextQuestion(); // Show the next question
        }
    </script>
</head>
<body onload="loadTxtFile()">
    <h1>Quiz</h1>
    <div id="question"></div>
    <div id="answer"></div>
    <button onclick="showAnswer()">Show Answer</button>
    <button onclick="nextQuestion()">Next Question</button>
</body>
</html>
